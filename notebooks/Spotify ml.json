{"paragraphs":[{"text":"import requests\nimport json\nimport base64\nimport pandas as pd","user":"anonymous","dateUpdated":"2017-05-15T20:54:25-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1494471604445_504990757","id":"20170510-200004_670998408","dateCreated":"2017-05-10T20:00:04-0700","dateStarted":"2017-05-15T20:54:25-0700","dateFinished":"2017-05-15T20:54:25-0700","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:13840"},{"text":"# Get an access token\nTOKEN_URL = \"https://accounts.spotify.com/api/token\"\nCLIENT_ID = \"fa7e7c8d114a487c81a31a32dd0c0ef5\"\nCLIENT_SECRET = \"7df74727c0a846b1ba7bf042f9421f6c\"\nDATA = {\"grant_type\":\"client_credentials\"}\ntemp1 = CLIENT_ID+\":\"+CLIENT_SECRET\ntemp2 = temp1.encode('utf-8','strict')\nHEADER_64_STRING = base64.b64encode(temp2)\nHEADERS = {\"Authorization\":b\"Basic \"+HEADER_64_STRING}\nresponse = requests.post(TOKEN_URL, data=DATA, headers=HEADERS)\nresponse.content\naccess_token = response.json()['access_token']\naccess_headers = {\"Authorization\":\"Bearer \"+access_token}","user":"anonymous","dateUpdated":"2017-05-15T21:32:24-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1494471800890_-1049719896","id":"20170510-200320_1035052814","dateCreated":"2017-05-10T20:03:20-0700","dateStarted":"2017-05-15T21:32:24-0700","dateFinished":"2017-05-15T21:32:24-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13841"},{"text":"# Request featured playlists\nfeaturedPlaylistsResponse = requests.get(\"https://api.spotify.com/v1/browse/featured-playlists\", headers=access_headers)","user":"anonymous","dateUpdated":"2017-05-15T21:32:26-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1494471808183_2147005473","id":"20170510-200328_1798121557","dateCreated":"2017-05-10T20:03:28-0700","dateStarted":"2017-05-15T21:32:26-0700","dateFinished":"2017-05-15T21:32:27-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13842"},{"text":"# Convert to dataframe\ndf = pd.DataFrame(featuredPlaylistsResponse.json()[\"playlists\"][\"items\"])","user":"anonymous","dateUpdated":"2017-05-15T18:47:27-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1494473600718_-812540551","id":"20170510-203320_2123035668","dateCreated":"2017-05-10T20:33:20-0700","dateStarted":"2017-05-15T18:47:27-0700","dateFinished":"2017-05-15T18:47:27-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13843"},{"text":"# Get a list of tracks in each playlist, then add a list of their id's to a new column\ndf['trackslist'] = \"\"\ndf['trackslist'] = df['trackslist'].astype(object)\nfor index, row in df.iterrows():\n    tracks = requests.get(row['href']+'/tracks', headers=access_headers)\n    throwaway = df.set_value(index, 'trackslist', [ item['track']['id'] for item in tracks.json()['items'] ] )\n    # ^ we assign df.set_value to a throwaway variable so that Zeppelin doesnt print it.  Don't want to clog stdout with several copies of our dataframe","user":"anonymous","dateUpdated":"2017-05-15T20:32:16-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1494869203628_931027248","id":"20170515-102643_41927189","dateCreated":"2017-05-15T10:26:43-0700","dateStarted":"2017-05-15T18:47:29-0700","dateFinished":"2017-05-15T18:47:34-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13844"},{"text":"# Add song features\nfor index, row in df.iterrows():\n    for item in row['trackslist']:\n            featuresResponse = requests.get(\"https://api.spotify.com/v1/audio-features/\"+item, headers=access_headers)\n            feat\nfeaturesResponse","user":"anonymous","dateUpdated":"2017-05-15T20:28:32-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"<Response [200]>\n"}]},"apps":[],"jobName":"paragraph_1494876919080_262763784","id":"20170515-123519_209711789","dateCreated":"2017-05-15T12:35:19-0700","dateStarted":"2017-05-15T20:28:32-0700","dateFinished":"2017-05-15T20:28:33-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13847"},{"text":"","user":"anonymous","dateUpdated":"2017-05-15T20:52:20-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"Traceback (most recent call last):\n  File \"/tmp/zeppelin_python-1680344965561227662.py\", line 278, in <module>\n    raise Exception(traceback.format_exc())\nException: Traceback (most recent call last):\n  File \"/tmp/zeppelin_python-1680344965561227662.py\", line 271, in <module>\n    exec(code)\n  File \"<stdin>\", line 1, in <module>\nNameError: name 'python' is not defined\n\n"}]},"apps":[],"jobName":"paragraph_1494877277330_1001373282","id":"20170515-124117_89849374","dateCreated":"2017-05-15T12:41:17-0700","dateStarted":"2017-05-15T20:36:10-0700","dateFinished":"2017-05-15T20:36:10-0700","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:13848"},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1494905770345_-2034218616","id":"20170515-203610_200497718","dateCreated":"2017-05-15T20:36:10-0700","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:13849"}],"name":"Spotify ml","id":"2CF6NR72Z","angularObjects":{"2CEXNBUU3:shared_process":[],"2CGV5XDJB:shared_process":[],"2CECT9V36:shared_process":[],"2CHD36B5D:shared_process":[],"2CDFS4NCK:shared_process":[],"2CDHJ34X1:shared_process":[],"2CEJ14NBE:shared_process":[],"2CDWY6TY9:shared_process":[],"2CEKFQ7V9:shared_process":[],"2CEPZ8KU7:shared_process":[],"2CH296VYE:shared_process":[],"2CFWKSAZQ:shared_process":[],"2CFJ49ZQS:shared_process":[],"2CH5E14MC:shared_process":[],"2CESJG15P:shared_process":[],"2CE386NS5:shared_process":[],"2CH3V2MS4:shared_process":[],"2CG5PF51E:shared_process":[],"2CHABJCFB:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}